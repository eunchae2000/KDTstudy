<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script type="text/javascript">
	$(function() {
		// 특정한 이벤트(상황)가 발생하면 자동 호출되는 콜백함수
		$('#b1').click(function() {
			// 서버에 있는 member.json을 호출하자.
			// 원할 때 순서 상관없이 다른 서버의 자원을 호출하거나, 내 서버의 다른 자원을 호출하고자 하는 경우
			// ajax를 사용하자.
			$.ajax({
				url: '../data/member.json',
				success: function(doc) {
					// alert ('받은 데이터는 ' + doc)
					// for + for-each
					// function(x, y) == > x: index, y:one(json)
					// doc ==> []
					$(doc).each(function(index, person){
						console.log(index + " >> " + person)
						id = person.id //
						email = person.email
						car = person.car
						console.log(index + " >> " + id + " " + email + " " +car)
						
						$.ajax({
							url: 'db_create.jsp',
							data:{
								id: id,
								email: email,
								car: car
							},
							success: function(){
								console.log("")
							}
						})
					})
				}
			})
		})
	})
</script>
</head>
<body>
	<button id="b1">member.json 읽어서 db에 넣기</button>
</body>
</html>